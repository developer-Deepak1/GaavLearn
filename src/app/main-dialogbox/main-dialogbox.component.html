<!-- PrimeNG Dialog -->
<p-dialog 
  header="Change Password" 
  [modal]="true" 
  [(visible)]="visible" 
  [style]="{ width: '30rem' }"
  [breakpoints]="{'960px': '95vw'}"
  [closable]="false"
  [draggable]="false"
>
  <form [formGroup]="passwordForm" (ngSubmit)="onSubmit()" class="container">

    <!-- Old Password -->
    <div style="margin-top:10px" class="row mb-3">
      <label class="col-sm-4 col-form-label">Old Password</label>
      <div class="col-sm-8">
        <input type="password" pInputText class="form-control" formControlName="oldPassword" />
        <small class="text-danger" *ngIf="passwordForm.get('oldPassword')?.touched && passwordForm.get('oldPassword')?.hasError('required')">
          Old password is required
        </small>
      </div>
    </div>

    <!-- New Password -->
    <div class="row mb-3">
      <label class="col-sm-4 col-form-label">New Password</label>
      <div class="col-sm-8">
        <input type="password" pInputText class="form-control" formControlName="newPassword" />
        <small class="text-danger" *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.hasError('required')">
          New password is required
        </small>
        <small class="text-danger" *ngIf="passwordForm.get('newPassword')?.touched && passwordForm.get('newPassword')?.hasError('minlength')">
          Password must be at least 6 characters
        </small>
        <small class="text-danger" *ngIf="passwordForm.hasError('sameAsOld')">
          New password cannot be same as old password
        </small>
      </div>
    </div>

    <!-- Confirm Password -->
    <div class="row mb-3">
      <label class="col-sm-4 col-form-label">Confirm Password</label>
      <div class="col-sm-8">
        <input type="password" pInputText class="form-control" formControlName="confirmPassword" />
        <small class="text-danger" *ngIf="passwordForm.get('confirmPassword')?.touched && passwordForm.get('confirmPassword')?.hasError('required')">
          Confirm password is required
        </small>
        <small class="text-danger" *ngIf="passwordForm.hasError('mismatch')">
          Passwords do not match
        </small>
      </div>
    </div>

    <!-- Actions -->
    <div class="d-flex justify-content-end gap-2">
      <p-button *ngIf="!isFirstLogin" label="Cancel" severity="secondary" (click)="onHide()" type="button" />
      <p-button label="Update" type="submit" [disabled]="passwordForm.invalid" />
    </div>
  </form>
</p-dialog>
